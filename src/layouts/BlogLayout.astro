---
import Header from "../components/Header.astro";
import PostNavigation from "../components/PostNavigation.astro";
import Layout from "./Layout.astro";
import type { CollectionEntry } from "astro:content";

export interface Props {
  title: string;
  description: string;
  publishDate: Date;
  tags?: string[];
  prevPost?: CollectionEntry<"blog"> | null;
  nextPost?: CollectionEntry<"blog"> | null;
}

const { title, description, publishDate, tags, prevPost, nextPost } =
  Astro.props;

// Generate keywords from tags if available
const keywords =
  tags?.join(", ") || "blog, software engineering, web development";
---

<Layout
  title={`${title} - Pubudu Ranasinghe`}
  description={description}
  keywords={keywords}
  type="article"
  publishDate={publishDate}
>
  <div class="container">
    <Header compact />
  </div>
  <article class="container pt-10 pb-20">
    <header
      class="prose dark:prose-invert prose-stone prose-h1:text-2xl prose-h1:mb-10 prose-h1:font-medium max-w-none"
    >
      <h1>{title}</h1>
    </header>
    <div
      class="prose dark:prose-invert prose-stone prose-p:mb-10 prose-headings:font-medium prose-strong:font-medium prose-code:font-[Geist_Mono] prose-code:before:content-none prose-code:after:content-none prose-pre:my-0 blog-content max-w-none"
    >
      <slot />
    </div>

    <PostNavigation prevPost={prevPost} nextPost={nextPost} />
  </article>
</Layout>

<style>
  @font-face {
    font-family: "Geist Mono";
    src: url("/fonts/GeistMono[wght].woff2") format("woff2-variations");
    font-weight: 400, 500;
    font-stretch: 75% 125%;
    font-style: normal;
    font-display: swap;
  }
  .back-link:hover {
    color: var(--color-text-emphasis);
  }

  .astro-code {
    margin-top: 0;
    margin-bottom: 0;
  }
</style>
